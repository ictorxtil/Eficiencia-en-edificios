<html>
	<head>

	</head>
	<body>
		<div>
			<form name="consulta">
		<table style="width:200px;" border="0">
      <tr>
        <th height="33" scope="row"><h6 style="width:125px;">Irregular</h6></th>
        <td>
          <label class="switch">
  <input  type="checkbox" id="chk"/>
  <span class="slider round"></span>
  </label>
        </td>
        </tr>

<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%Carga regular %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
      <tr>
      <th height="33" id="r1" scope="row" ><h6 style="width:125px;">Nº ventanas por planta</h6></th>
      <td><span class="cnt"  id="r11" style="font-size: 12pt; font-weight: bold; color: black;">
      <input  type="text"  id="r111" class="Input" name="nventanas" style="  margin-top:15px; margin" value="" size="200" />
      </span></td>
      </tr>
      <tr>
      <th height="33" id="r2" scope="row" ><h6 style="width:125px;">Distancia entre ventana</h6></th>
      <td><span class="cnt"  id="r22" style="font-size: 12pt; font-weight: bold; color: black;">
      <input  type="text"  id="r222" class="Input" name="dventanas" style="  margin-top:15px; margin" value="" size="200" />
      </span></td>
      </tr>
<tr>
<th height="33" id="r3" scope="row" ><h6 style="width:125px;">Longitud ventana</h6></th>
<td><span class="cnt"  id="r33" style="font-size: 12pt; font-weight: bold; color: black;">
<input  type="text" id="r333" class="Input" name="lventana" style="  margin-top:15px; margin" value="" size="200" />
</span></td>
</tr>

<tr>
<th height="33" id="r4" scope="row"><h6 style="width:125px;">Altura ventana</h6></th>
<td><span class="cnt"  id="r44" style="font-size: 12pt; font-weight: bold; color: black; text-align: center;">
<input type="text"  id="r444" class="Input" name="aventana" style="  margin-top:15px; margin" value="" size="200"/>
</span></td>
</tr>
<tr>
<th height="33"  id="r5" scope="row"><h6 style="width:125px;">Longitud pared-ventana</h6></th>
<td><span class="cnt"  id="r55" style="font-size: 12pt; font-weight: bold; color: black;">
<input autofocus="autofocus"   id="r555" type="text" class="Input" name="desfaseancho" style="  margin-top:15px; margin" value="" size="200" />
</span></td>
</tr>

<tr>
<th height="33"  id="r6" scope="row"><h6 style="width:125px;">Altura suelo-ventana</h6></th>
<td><span class="cnt"  id="r66" style="font-size: 12pt; font-weight: bold; color: black; text-align: center;">
<input type="text"  id="r666" class="Input" name="desfasealto" style="  margin-top:15px; margin" value="" size="200"/>
</span></td>
</tr>
<tr>
<th height="33" id="r7" scope="row"></th>
<td><span  id="r77" class="cnt">
<input id="r777" value="Generar" target="_parent" onclick="ventana()" type="button" class="boton" style=" cursor: pointer"/>
</span></td>
</tr>
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!-- %%%%%%%%%%%%%%%%%%%%%%%%%%Carga irregular %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%-->
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<tr>
<th height="33" id="i1" style="display:none;" scope="row" ><h2 style="width:125px; color: yellow;">Modulo en construccion</h2></th>
</tr>
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
</table>
</form>
</div>
<!-- %%%Script para hacer que aparezca y desaparezca el menu del slide %%%%%%-->
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
			<script>
			document.getElementById('chk').onchange = function(){
			   if(this.checked) {


						document.getElementById('i1').style.display='block';

					 document.getElementById('r1').style.display='none';
					  document.getElementById('r11').style.display='none';
						 document.getElementById('r111').style.display='none';
						 document.getElementById('r2').style.display='none';
						 document.getElementById('r22').style.display='none';
							document.getElementById('r222').style.display='none';
							document.getElementById('r3').style.display='none';
							 document.getElementById('r33').style.display='none';
								document.getElementById('r333').style.display='none';
								document.getElementById('r4').style.display='none';
								 document.getElementById('r44').style.display='none';
									document.getElementById('r444').style.display='none';
									document.getElementById('r5').style.display='none';
									 document.getElementById('r55').style.display='none';
										document.getElementById('r555').style.display='none';
                    document.getElementById('r6').style.display='none';
                     document.getElementById('r66').style.display='none';
                      document.getElementById('r666').style.display='none';
                      document.getElementById('r7').style.display='none';
                       document.getElementById('r77').style.display='none';
                        document.getElementById('r777').style.display='none';

			   //more js statements
			   }
			   else {
						 document.getElementById('i1').style.display='none';

						 document.getElementById('r1').style.display='block';
						document.getElementById('r11').style.display='block';
						 document.getElementById('r111').style.display='block';
						 document.getElementById('r2').style.display='block';
						 document.getElementById('r22').style.display='block';
							document.getElementById('r222').style.display='block';
							document.getElementById('r3').style.display='block';
							document.getElementById('r33').style.display='block';
							document.getElementById('r333').style.display='block';
							 document.getElementById('r4').style.display='block';
							 document.getElementById('r44').style.display='block';
							 document.getElementById('r444').style.display='block';
							 document.getElementById('r5').style.display='block';
							 document.getElementById('r55').style.display='block';
							 document.getElementById('r555').style.display='block';
               document.getElementById('r6').style.display='block';
							 document.getElementById('r66').style.display='block';
							 document.getElementById('r666').style.display='block';
               document.getElementById('r7').style.display='block';
							 document.getElementById('r77').style.display='block';
							 document.getElementById('r777').style.display='block';
			   }
			}
			</script>
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<!---%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% -->
<script>

  function ventana(){
//<![CDATA[
    document.getElementById("container").innerHTML="";
  var nv = document.getElementsByName("nventanas")[0].value;
  var lv = document.getElementsByName("lventana")[0].value;
  var av = document.getElementsByName("aventana")[0].value;
  var lav = document.getElementsByName("desfaseancho")[0].value;
  var aav = document.getElementsByName("desfasealto")[0].value;
  var dv = document.getElementsByName("dventanas")[0].value;

  if((m1==0) || (m2==0) || (m3==0) ||(nv<=0)||(lv<=0)||(av<=0)||(isNaN(nv))||(isNaN(lv))||(isNaN(av))||(isNaN(lav))||(isNaN(aav))||(isNaN(dv))){alert("Por favor rellena los campos de los apartados anteriores o rellenelos correctamente")}
  else{

  var profundidad=parseInt(p)+0.5;
  var h=0.1;

  if(dv<1){alert("El sistema 3D no admite una distancia entre ventanas inferior a 1")}
  else{
    var clock = new THREE.Clock();
  ////////////////////////////////////////////////////////////////////////////////
  // Scena ///////////////////////////////////////////////////////////////////////
  	var scene = new THREE.Scene();
  	scene.background = new THREE.Color( 0xFFFFFF );
  ///////////////////////////////////////////////////////////////////////////////
  // Renderer ///////////////////////////////////////////////////////////////////
  	var renderer = new THREE.WebGLRenderer();
  	renderer.setSize(390, 390);
  	container = document.getElementById('container');
  	container.appendChild(renderer.domElement);
  //Camara //////////////////////////////////////////////////////////////////////
  	var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 2000);
  camera.position.set(l/2,(a*nplantas/2),100)
  	cameraControls = new THREE.TrackballControls(camera, renderer.domElement);
  	cameraControls.target.set(0, 0, 0);
  ///////////////////////////////////////////////////////////////////////////////
	// lights
					scene.add( new THREE.AmbientLight( 0x666666 ) );
					var light = new THREE.DirectionalLight( 0xdfebff, 1 );
					light.position.set( 50, 200, 100 );
					light.position.multiplyScalar( 1.3 );
					light.castShadow = true;
					light.shadow.mapSize.width = 390;
					light.shadow.mapSize.height = 390;
					var d = 300;
					light.shadow.camera.left = - d;
					light.shadow.camera.right = d;
					light.shadow.camera.top = d;
					light.shadow.camera.bottom = - d;
					light.shadow.camera.far = 1000;
					scene.add( light );
					// ground
					var groundTexture = new THREE.TextureLoader().load( 'texturas/cesped.jpg' );
					groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;
					groundTexture.repeat.set( 25, 25 );
					groundTexture.anisotropy = 16;
					var groundMaterial = new THREE.MeshLambertMaterial( { map: groundTexture } );
					var mesh = new THREE.Mesh( new THREE.PlaneBufferGeometry( 20000, 20000 ), groundMaterial );
					mesh.position.y = -2;
					mesh.rotation.x = - Math.PI / 2;
					mesh.receiveShadow = true;
					scene.add( mesh );
					// ground
					var groundTexture = new THREE.TextureLoader().load( 'texturas/paisaje.jpg' );
					groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;
					groundTexture.repeat.set( 15,15  );
					groundTexture.anisotropy = 16;
					var groundMaterial = new THREE.MeshLambertMaterial( { map: groundTexture } );
					var mesh = new THREE.Mesh( new THREE.PlaneBufferGeometry( 20000, 20000 ), groundMaterial );
					mesh.position.y = -2;
					mesh.position.z = -280;

					mesh.receiveShadow = true;
					scene.add( mesh );

  //Objeto///////////////////////////////////////////////////////////////////////


    /////////////////////////////////////////////////////////////////////////////
    for(var k = 0; k < nv; k++ ){
    geom = new THREE.CubeGeometry( lv, av, profundidad );
  	cubes1 = new THREE.Object3D();
  	scene.add( cubes1 );

  	var texture = new THREE.TextureLoader().load( 'texturas/cristal.jpg' );

  	var mat = new THREE.MeshBasicMaterial( { map: texture} );
  	for(var i = 1; i < nplantas; i++ ) {
      var aven=parseInt(a)*(i-1) + parseInt(aav) - (a/3);
      var lven=parseInt(dv)*(k) + parseInt(lv)*(k) + parseInt(lav)- (l/2.05);
  	                cube1 = new THREE.Mesh( geom, mat );
  	        				cube1.position.set( lven,aven,h );
  					 				cube1.rotation.set(0,0,0);
  	        				cubes1.add(cube1);
  	}
  cubes1.remove(cube);
}
  scene.add(cubos)
	scene.add(techo)
    /////////////////////////////////////////////////////////////////////////////


  /////////////////////////////////////////////////////////////////////////////
  // Renderización //////////////////////////////////////////////////////////////
  		function render() {
  		var delta = clock.getDelta();
  	  requestAnimationFrame(render);
  		cameraControls.update(delta);
  	  renderer.render(scene, camera);
  	};
  	render();
  //////////////////////////////////////////////////////////////////////////////
  window["ventanas"] =  cubes1;
	window["nv"] =  nv;
	window["lv"] =  lv;
  window["av"] =  av;
	window["lav"] =  lav;
  window["aav"] =  aav;
  window["dv"] =  dv;
	window["profundidad"] =  profundidad;
	window["h"] =  h;
    }
  }
}
//]]>
</script>
</body>
</html>
